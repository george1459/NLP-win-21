# install.packages("stm")
library(stm)
library(tidyverse)
library(gutenbergr)
library(dplyr)
library(tidytext)
library(quanteda)
######################### ANOTHER EXAMPLE
#textProcessor() which leverages the tm Package
library(tm)
gadarian
gadarian$open.ended.response
gadarian$open.ended.response【3】
gadarian$open.ended.response[3]
gadarian$open.ended.response[30]
temp$vocab
######################### ANOTHER EXAMPLE
#textProcessor() which leverages the tm Package
library(tm)
temp<-textProcessor(documents=gadarian$open.ended.response,
metadata=gadarian)
temp$documents
temp$vocab
temp$meta
nrow(temp$meta)
nrow(temp$vocab)
temp$vocab
length(temp$vocab)
?prepDocuments
out
out <- prepDocuments(temp$documents, temp$vocab, temp$meta)
out
length(temp$meta)
out$meta
outout$documents
out$documents
out$documents$'330'
out$vocab
length(out$vocab)
out$documents$'331'
out$documents$'3'
out$documents$'30'
out$documents$'300'
out$documents$'301'
out$documents$'1'
out$documents$'2'
out$documents$'3'
out$documents$'3'
out$meta
out$meta$treatment
out$meta$pid_rep
1
1
mod.out
mod.out
mod.out
typeof(out$documents)
typeof(c(1,2))
typeof(c('阿斯蒂芬',2))
typeof(c('阿斯蒂芬','阿斯顿发送到发'))
mod.out2 <- stm(c('adsf', 'fdsfaf'), out$vocab, 3, prevalence=~treatment + s(pid_rep),
data=out$meta, model=mod.out, max.em.its=10)
